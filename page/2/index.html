<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="零壹">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="零壹">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="shankai">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>零壹</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">零壹</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">万物虚无</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">54</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">118</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">18</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/18/grpc-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="shankai">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="零壹">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/18/grpc-notes/" class="post-title-link" itemprop="url">gRPC 笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-18 18:20:00" itemprop="dateCreated datePublished" datetime="2021-01-18T18:20:00+00:00">2021-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-13 10:05:17" itemprop="dateModified" datetime="2021-12-13T10:05:17+00:00">2021-12-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/RPC/" itemprop="url" rel="index"><span itemprop="name">RPC</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><blockquote>
<p>A high performance, open source universal RPC framework</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.grpc.io/">https://www.grpc.io/</a></p>
<p>gRPC is a modern open source high performance RPC framework that can run in any environment. It can efficiently connect services in and across data centers with pluggable support for load balancing, tracing, health checking and authentication. It is also applicable in last mile of distributed computing to connect devices, mobile applications and browsers to backend services.</p>
<ul>
<li>Simple service definition <code>Define your service using Protocol Buffers, a powerful binary serialization toolset and language</code></li>
<li>Start quickly and scale <code>Install runtime and dev environments with a single line and also scale to millions of RPCs per second with the framework</code></li>
<li>Works across languages and platforms <code>Automatically generate idiomatic client and server stubs for your service in a variety of languages and platforms</code></li>
<li>Bi-directional streaming and integrated auth <code>Bi-directional streaming and fully integrated pluggable authentication with HTTP/2-based transport</code></li>
</ul>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p><img src="/images/grpc/landing-2.svg" alt="landing-2"></p>
<h2 id="Protocol-Compiler"><a href="#Protocol-Compiler" class="headerlink" title="Protocol Compiler"></a>Protocol Compiler</h2><p>Download: <a target="_blank" rel="noopener" href="https://github.com/protocolbuffers/protobuf/releases">https://github.com/protocolbuffers/protobuf/releases</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> https://github.com/protocolbuffers/protobuf/releases/download/v3.14.0/protoc-3.14.0-osx-x86_64.zip</span></span><br><span class="line"></span><br><span class="line">cp /Users/shankai/Downloads/protoc-3.14.0-osx-x86_64/bin/protoc /usr/local/bin/protoc</span><br><span class="line"></span><br><span class="line">protoc -h</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /path/xx.proto</span></span><br><span class="line"></span><br><span class="line">protoc --java_out=../java/ vehicle-service.proto</span><br></pre></td></tr></table></figure>

<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><blockquote>
<p>java &amp; nodejs</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/shankai/artifacts/tree/master/grpc-example">https://github.com/shankai/artifacts/tree/master/grpc-example</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><p><a target="_blank" rel="noopener" href="https://www.grpc.io/docs/languages/java/quickstart/">https://www.grpc.io/docs/languages/java/quickstart/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.grpc.io/docs/languages/java/basics/">https://www.grpc.io/docs/languages/java/basics/</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/grpc/grpc-java/blob/master/README.md">https://github.com/grpc/grpc-java/blob/master/README.md</a></p>
<h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h3><p><a target="_blank" rel="noopener" href="https://www.grpc.io/docs/languages/node/quickstart/">https://www.grpc.io/docs/languages/node/quickstart/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/01/06/booklist-2021/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="shankai">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="零壹">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/06/booklist-2021/" class="post-title-link" itemprop="url">2021 书单</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-06 10:00:00" itemprop="dateCreated datePublished" datetime="2021-01-06T10:00:00+00:00">2021-01-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-13 10:05:17" itemprop="dateModified" datetime="2021-12-13T10:05:17+00:00">2021-12-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Reading/" itemprop="url" rel="index"><span itemprop="name">Reading</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>368</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><input checked="" disabled="" type="checkbox"> 「长期价值——百年可口可乐的经营策略」（[英]Neville Isdell [美]David Beasley  高洁 译）</li>
<li><input checked="" disabled="" type="checkbox"> 「分布式服务架构——原理、设计与实践」（李艳鹏 杨彪 著）</li>
<li><input checked="" disabled="" type="checkbox"> 「见识——你能走多远，取决于见识」（吴军 著）</li>
<li><input checked="" disabled="" type="checkbox"> 「态度——把简单的事情，做得出人意料的精彩」（吴军 著）</li>
<li><input checked="" disabled="" type="checkbox"> 「格局——世界永远不缺聪明人」（吴军 著）</li>
<li><input disabled="" type="checkbox"> 「我的改变——个人的现代化 40 年」（王石）</li>
<li><input checked="" disabled="" type="checkbox"> 「不拘一格——网飞的自由与责任工作法」（[美]Reed Hastings [美]Erin Meyer 杨占 译）</li>
<li><input disabled="" type="checkbox"> 「反脆弱——从不确定性中获益」（[美]Nassim Nicholas Taleb 雨珂 译）</li>
<li><input disabled="" type="checkbox"> 「人生由我」（[加]Maye Musk 代晓 译）</li>
<li><input disabled="" type="checkbox"> 「他影响了中国——陈云」（叶永烈 著）</li>
<li><input disabled="" type="checkbox"> 「美国家庭万用亲子英文」</li>
<li><input disabled="" type="checkbox"> 「罗伯特议事规则」第 11 版 </li>
<li><input checked="" disabled="" type="checkbox"> 「你当像鸟飞往你的山——Educated」([美] 塔拉·韦斯特弗 | 任爱红 译)</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/12/25/activemq-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="shankai">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="零壹">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/25/activemq-notes/" class="post-title-link" itemprop="url">ActiveMQ Notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-25 20:17:00" itemprop="dateCreated datePublished" datetime="2020-12-25T20:17:00+00:00">2020-12-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-13 10:05:17" itemprop="dateModified" datetime="2021-12-13T10:05:17+00:00">2021-12-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/EventBus/" itemprop="url" rel="index"><span itemprop="name">EventBus</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="Docker-run"><a href="#Docker-run" class="headerlink" title="Docker run"></a>Docker run</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name activemq -p 61616:61616 -p 61613:61613 -p 61614:61614 -p 5672:5672 -p 1883:1883 -p 8161:8161 rmohr&#x2F;activemq:5.15.9</span><br></pre></td></tr></table></figure>
<p>环境变量</p>
<ul>
<li>ACTIVEMQ_TCP=61616</li>
<li>ACTIVEMQ_AMQP=5672</li>
<li>ACTIVEMQ_STOMP=61613</li>
<li>ACTIVEMQ_MQTT=1883</li>
<li>ACTIVEMQ_WS=61614</li>
<li>ACTIVEMQ_UI=8161</li>
</ul>
<h3 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:8161&#x2F;admin</span><br></pre></td></tr></table></figure>
<p>用户/密码: <code>admin</code>/<code>admin</code></p>
<h2 id="Protocols"><a href="#Protocols" class="headerlink" title="Protocols"></a>Protocols</h2><h3 id="MQTT-消息队列遥测传输"><a href="#MQTT-消息队列遥测传输" class="headerlink" title="MQTT 消息队列遥测传输"></a>MQTT 消息队列遥测传输</h3><blockquote>
<p>Message Queuing Telemetry Transport</p>
</blockquote>
<h4 id="MQTT-Publish-Subscribe-Architecture"><a href="#MQTT-Publish-Subscribe-Architecture" class="headerlink" title="MQTT Publish / Subscribe Architecture"></a>MQTT Publish / Subscribe Architecture</h4><p><img src="/images/mqtt/mqtt-publish-subscribe.png" alt="mqtt-publish-subscribe"></p>
<h4 id="MQTT-Specification"><a href="#MQTT-Specification" class="headerlink" title="MQTT Specification"></a>MQTT Specification</h4><ul>
<li><a target="_blank" rel="noopener" href="https://mqtt.org/mqtt-specification/">https://mqtt.org/mqtt-specification/</a></li>
<li><a target="_blank" rel="noopener" href="http://mqtt.p2hp.com/">http://mqtt.p2hp.com/</a></li>
</ul>
<h4 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h4><ul>
<li>Eclipse Paho</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; eclipse paho</span><br><span class="line">https:&#x2F;&#x2F;www.eclipse.org&#x2F;paho&#x2F;index.php?page&#x3D;clients&#x2F;java&#x2F;index.php#</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; github</span><br><span class="line">https:&#x2F;&#x2F;github.com&#x2F;eclipse&#x2F;paho.mqtt.java</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; javadoc</span><br><span class="line">https:&#x2F;&#x2F;www.eclipse.org&#x2F;paho&#x2F;files&#x2F;javadoc&#x2F;index.html</span><br></pre></td></tr></table></figure>
<h3 id="JMS-Java消息服务"><a href="#JMS-Java消息服务" class="headerlink" title="JMS  Java消息服务"></a>JMS  Java消息服务</h3><blockquote>
<p>Java Message Service</p>
</blockquote>
<h4 id="JMS-Specification"><a href="#JMS-Specification" class="headerlink" title="JMS Specification"></a>JMS Specification</h4><p><a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/java-message-service.html">https://www.oracle.com/java/technologies/java-message-service.html</a></p>
<h3 id="AMQP-高级消息队列协议"><a href="#AMQP-高级消息队列协议" class="headerlink" title="AMQP 高级消息队列协议"></a>AMQP 高级消息队列协议</h3><blockquote>
<p>Advanced Message Queuing Protocol</p>
</blockquote>
<h4 id="AMQP-Specification"><a href="#AMQP-Specification" class="headerlink" title="AMQP Specification"></a>AMQP Specification</h4><p><a target="_blank" rel="noopener" href="https://www.amqp.org/">https://www.amqp.org/</a></p>
<p><a target="_blank" rel="noopener" href="https://activemq.apache.org/amqp">https://activemq.apache.org/amqp</a></p>
<h3 id="STOMP-简单-或流-面向文本的消息传递协议"><a href="#STOMP-简单-或流-面向文本的消息传递协议" class="headerlink" title="STOMP 简单(或流)面向文本的消息传递协议"></a>STOMP 简单(或流)面向文本的消息传递协议</h3><blockquote>
<p>STOMP is the Simple (or Streaming) Text Orientated Messaging Protocol.</p>
</blockquote>
<h4 id="Stomp-Specification"><a href="#Stomp-Specification" class="headerlink" title="Stomp Specification"></a>Stomp Specification</h4><ul>
<li><a target="_blank" rel="noopener" href="http://stomp.github.io/stomp-specification-1.2.html">http://stomp.github.io/stomp-specification-1.2.html</a></li>
</ul>
<h4 id="客户端-1"><a href="#客户端-1" class="headerlink" title="客户端"></a>客户端</h4><p>ActiveMQ Library: </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.activemq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>activemq-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.15.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Package: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.activemq.transport.stomp.StompConnection;</span><br><span class="line"><span class="keyword">import</span> org.apache.activemq.transport.stomp.StompFrame;</span><br></pre></td></tr></table></figure>


<h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><blockquote>
<p>Java Client Demo</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/shankai/artifacts/tree/master/activemq-example">https://github.com/shankai/artifacts/tree/master/activemq-example</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/10/01/serverless-nuclio-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="shankai">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="零壹">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/01/serverless-nuclio-notes/" class="post-title-link" itemprop="url">Nuclio Notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-01 20:00:00" itemprop="dateCreated datePublished" datetime="2020-10-01T20:00:00+00:00">2020-10-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-13 10:05:17" itemprop="dateModified" datetime="2021-12-13T10:05:17+00:00">2021-12-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Serverless/" itemprop="url" rel="index"><span itemprop="name">Serverless</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>381</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><blockquote>
<p>…</p>
</blockquote>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><h3 id="通过-Docker-运行-Nuclio"><a href="#通过-Docker-运行-Nuclio" class="headerlink" title="通过 Docker 运行 Nuclio"></a>通过 Docker 运行 Nuclio</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8070:8070 -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock -v &#x2F;Users&#x2F;shankai&#x2F;DockerTmp:&#x2F;tmp --name nuclio-dashboard quay.io&#x2F;nuclio&#x2F;dashboard:stable-amd64</span><br></pre></td></tr></table></figure>
<h3 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:8070&#x2F;projects</span><br></pre></td></tr></table></figure>


<h2 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h2><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><h2 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h2><h3 id="nuctl"><a href="#nuctl" class="headerlink" title="nuctl"></a>nuctl</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;github.com&#x2F;nuclio&#x2F;nuclio&#x2F;releases</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/01/linux-command-package/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="shankai">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="零壹">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/01/linux-command-package/" class="post-title-link" itemprop="url">Linux Command Notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-01 20:00:00" itemprop="dateCreated datePublished" datetime="2020-08-01T20:00:00+00:00">2020-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-13 10:05:17" itemprop="dateModified" datetime="2021-12-13T10:05:17+00:00">2021-12-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OS-VM-LXC/" itemprop="url" rel="index"><span itemprop="name">OS&VM&LXC</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install inetutils-ping</span><br><span class="line">apt-get install net-tools</span><br></pre></td></tr></table></figure>


<h2 id="jq"><a href="#jq" class="headerlink" title="jq"></a>jq</h2><h3 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h3><ul>
<li><code>-j</code> “join”</li>
<li><code>-r</code> “raw”</li>
</ul>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">curl --location --request GET &quot;http:&#x2F;&#x2F;icosregistry-icosregistry-service-icos.icos.icos.city&#x2F;v1&#x2F;assets?pageSize&#x3D;100000&amp;pageNo&#x3D;0&amp;typeName&#x3D;vehicle_speedlimit&quot;</span><br><span class="line"></span><br><span class="line">curl --location --request GET &quot;http:&#x2F;&#x2F;icosregistry-icosregistry-service-icos.icos.icos.city&#x2F;v1&#x2F;assets?typeName&#x3D;traffic_lamp_type&amp;pageSize&#x3D;100&quot; | jq -jr &#39;.data[]|.id,&quot; &quot;,.name,&quot;\n&quot;&#39;</span><br><span class="line"></span><br><span class="line">curl --location --request GET &quot;http:&#x2F;&#x2F;icosregistry-icosregistry-service-icos.icos.icos.city&#x2F;v1&#x2F;assets?typeName&#x3D;twin_intersection_type&amp;pageSize&#x3D;100&quot; | jq -jr &#39;.data[]|.id,&quot; &quot;,.name,&quot;\n&quot;&#39;</span><br><span class="line"></span><br><span class="line">curl --location --request GET &quot;http:&#x2F;&#x2F;icosregistry-icosregistry-service-icos.icos.icos.city&#x2F;v1&#x2F;assets?typeName&#x3D;twin_traffic_lamp_direction&amp;pageSize&#x3D;100&quot; | jq -jr &#39;.data[]|.id,&quot; &quot;,.name,&quot;\n&quot;&#39;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">curl --location --request GET &quot;http:&#x2F;&#x2F;icosregistry-icosregistry-service-icos.icos.icos.city&#x2F;v1&#x2F;assets?typeName&#x3D;isvd1_hikvision&amp;pageSize&#x3D;100&quot; | jq -jr &#39;.data[]|.id,&quot; &quot;,.name,&quot;\n&quot;&#39;</span><br><span class="line"></span><br><span class="line">curl --location --request GET &quot;http:&#x2F;&#x2F;icosregistry-icosregistry-service-icos.icos.icos.city&#x2F;v1&#x2F;assets?typeName&#x3D;cam1_hikvision&amp;pageSize&#x3D;100&quot; | jq -jr &#39;.data[]|.id,&quot; &quot;,.name,&quot;\n&quot;&#39;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/01/python-guide-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="shankai">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="零壹">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/01/python-guide-notes/" class="post-title-link" itemprop="url">Python Guide Notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-01 20:00:00" itemprop="dateCreated datePublished" datetime="2020-08-01T20:00:00+00:00">2020-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-13 10:05:17" itemprop="dateModified" datetime="2021-12-13T10:05:17+00:00">2021-12-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming-Language/" itemprop="url" rel="index"><span itemprop="name">Programming Language</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>779</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Pipenv"><a href="#Pipenv" class="headerlink" title="Pipenv"></a>Pipenv</h3><h4 id="安装-pipenv"><a href="#安装-pipenv" class="headerlink" title="安装 pipenv"></a>安装 pipenv</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 安装 pipenv</span><br><span class="line">pip3 install --user pipenv</span><br><span class="line"></span><br><span class="line"># 输出用户基础目录</span><br><span class="line">python3 -m site --user-base </span><br><span class="line"></span><br><span class="line"># 将用户基础目录&#x2F;bin 添加到系统 PATH 中, 例如</span><br><span class="line"># export PATH&#x3D;$PAHT:&#x2F;python_user_base_path&#x2F;bin</span><br><span class="line"></span><br><span class="line">pipenv -h</span><br></pre></td></tr></table></figure>


<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>安装依赖 <code>requests</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入项目目录</span></span><br><span class="line">cd hellopython</span><br><span class="line"><span class="comment"># 安装依赖（requests), 成功后目录下包含 Pipfile 文件</span></span><br><span class="line">pipenv install requests</span><br></pre></td></tr></table></figure>


<p>创建 <code>main.py</code> 文件，使用  <code>requests</code> 依赖</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://httpbin.org/ip&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;Your IP is &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(response.json()[<span class="string">&#x27;origin&#x27;</span>]))</span><br></pre></td></tr></table></figure>


<p>运行 <code>main.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pipenv run python main.py</span><br><span class="line"><span class="comment"># 输出示例</span></span><br><span class="line">Your IP <span class="keyword">is</span> <span class="number">123.123</span><span class="number">.123</span><span class="number">.123</span></span><br></pre></td></tr></table></figure>


<h3 id="Virtualenv"><a href="#Virtualenv" class="headerlink" title="Virtualenv"></a>Virtualenv</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install virtualenv</span><br><span class="line">virtualenv --version</span><br></pre></td></tr></table></figure>


<h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><p>初始化工程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir hellopython-virtualenv</span><br><span class="line">cd hellopython-virtualenv</span><br></pre></td></tr></table></figure>
<p>创建虚拟环境 <code>venv</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">virtualenv venv</span><br><span class="line"># 激活 venv</span><br><span class="line">source venv&#x2F;bin&#x2F;activate</span><br><span class="line"># 停用当前虚拟环境</span><br><span class="line"># deactivate</span><br><span class="line"># 删除虚拟环境（删除对应文件夹）</span><br><span class="line"># rm -rf venv</span><br></pre></td></tr></table></figure>
<p>安装依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/01/tile38-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="shankai">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="零壹">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/01/tile38-notes/" class="post-title-link" itemprop="url">Tile38 Notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-01 20:00:00" itemprop="dateCreated datePublished" datetime="2020-08-01T20:00:00+00:00">2020-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-13 10:05:17" itemprop="dateModified" datetime="2021-12-13T10:05:17+00:00">2021-12-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NoSQL/" itemprop="url" rel="index"><span itemprop="name">NoSQL</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>603</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>GeoJSON Preview </p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://geojson.io/">https://geojson.io/</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://geojson.tools/">http://geojson.tools/</a></p>
</li>
</ul>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## pull</span><br><span class="line">docker pull tile38&#x2F;tile38</span><br><span class="line">## run </span><br><span class="line">docker run -d -p 9851:9851 --name tile38-dev tile38&#x2F;tile38</span><br><span class="line">## in</span><br><span class="line">docker exec -it tile38-dev sh</span><br><span class="line">## tile38-cli</span><br><span class="line">tile38-cli</span><br></pre></td></tr></table></figure>


<h2 id="Command-Usage"><a href="#Command-Usage" class="headerlink" title="Command Usage"></a>Command Usage</h2><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><blockquote>
<p>SET key id [FIELD name value …] [EX seconds] [NX|XX] (OBJECT geojson)|(POINT lat lon [z])|(BOUNDS minlat minlon maxlat maxlon)|(HASH geohash)|(STRING value)</p>
</blockquote>
<h3 id="FSET"><a href="#FSET" class="headerlink" title="FSET"></a>FSET</h3><blockquote>
<p>FSET key id [XX] field value [field value …]</p>
</blockquote>
<h3 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h3><blockquote>
<p>GET key id [WITHFIELDS] [OBJECT|POINT|BOUNDS|(HASH geohash)]</p>
</blockquote>
<h3 id="EXPIRE"><a href="#EXPIRE" class="headerlink" title="EXPIRE"></a>EXPIRE</h3><p>Set a timeout on an id.</p>
<blockquote>
<p>EXPIRE key  id [seconds]</p>
</blockquote>
<h3 id="DEL"><a href="#DEL" class="headerlink" title="DEL"></a>DEL</h3><p>Remove a specified object.</p>
<blockquote>
<p>DEL fleet truck1</p>
</blockquote>
<h3 id="DROP"><a href="#DROP" class="headerlink" title="DROP"></a>DROP</h3><p>Remove all objects from specified key.</p>
<blockquote>
<p>DROP fleet</p>
</blockquote>
<h3 id="JSET"><a href="#JSET" class="headerlink" title="JSET"></a>JSET</h3><blockquote>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/01/vault-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="shankai">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="零壹">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/01/vault-notes/" class="post-title-link" itemprop="url">Vault  Notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-01 20:00:00" itemprop="dateCreated datePublished" datetime="2020-08-01T20:00:00+00:00">2020-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-13 10:05:17" itemprop="dateModified" datetime="2021-12-13T10:05:17+00:00">2021-12-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Security/" itemprop="url" rel="index"><span itemprop="name">Security</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>386</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>启动实例（开发环境）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run --cap-add&#x3D;IPC_LOCK -e &#39;VAULT_DEV_ROOT_TOKEN_ID&#x3D;myroot&#39; -p 8200:8200 -d --name&#x3D;dev-vault vault</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">docker run --cap-add&#x3D;IPC_LOCK -e &#39;VAULT_DEV_ROOT_TOKEN_ID&#x3D;myroot&#39; -e &#39;VAULT_DEV_LISTEN_ADDRESS&#x3D;0.0.0.0:8200&#39; vault</span><br></pre></td></tr></table></figure>
<p>启动成功后，在启动日志中获取默认的 Token。如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Unseal Key: BRGYd/8vJSl5101boUHdXDu2ZfYTsJy5tdgXlvOyysQ=</span><br><span class="line">Root Token: myroot</span><br></pre></td></tr></table></figure>


<p>认证</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vault login myroot</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/06/python-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="shankai">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="零壹">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/06/python-notes/" class="post-title-link" itemprop="url">Python 2.7 Notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-06 20:00:00" itemprop="dateCreated datePublished" datetime="2020-06-06T20:00:00+00:00">2020-06-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-13 10:05:17" itemprop="dateModified" datetime="2021-12-13T10:05:17+00:00">2021-12-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming-Language/" itemprop="url" rel="index"><span itemprop="name">Programming Language</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>175</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="安装-python-2-7"><a href="#安装-python-2-7" class="headerlink" title="安装 python 2.7"></a>安装 python 2.7</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python</span><br><span class="line">apt-get install python-pip</span><br></pre></td></tr></table></figure>
<h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><ol>
<li>安装通过 import 生成依赖文件（如果存在依赖文件，即可忽略）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install pipreqs</span><br><span class="line">pipreqs .&#x2F;</span><br></pre></td></tr></table></figure></li>
<li>安装依赖<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
<h2 id="执行程序"><a href="#执行程序" class="headerlink" title="执行程序"></a>执行程序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python xxx.py</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/01/pushpin-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="shankai">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="零壹">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/01/pushpin-notes/" class="post-title-link" itemprop="url">Pushpin Notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-01 20:00:00" itemprop="dateCreated datePublished" datetime="2020-06-01T20:00:00+00:00">2020-06-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-13 10:05:17" itemprop="dateModified" datetime="2021-12-13T10:05:17+00:00">2021-12-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Websocket/" itemprop="url" rel="index"><span itemprop="name">Websocket</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name pushpin -p 7999:7999 -p 5560:5560 -p 5561:5561 -p 5562:5562 -p 5563:5563 fanout&#x2F;pushpin:1.28.0</span><br><span class="line"></span><br><span class="line">docker run -d --name pushpin -p 7999:7999 -p 5560:5560 -p 5561:5561 -p 5562:5562 -p 5563:5563 -v &#x2F;Users&#x2F;shankai&#x2F;Desktop&#x2F;pushpin-config:&#x2F;etc&#x2F;pushpin&#x2F; fanout&#x2F;pushpin:1.28.0</span><br><span class="line"></span><br><span class="line">docker run -d --name pushpin -p 7999:7999 -p 5560:5560 -p 5561:5561 -p 5562:5562 -p 5563:5563 -v &#x2F;Users&#x2F;shankai&#x2F;Desktop&#x2F;pushpin-config:&#x2F;etc&#x2F;pushpin&#x2F; fanout&#x2F;pushpin:1.31.0</span><br><span class="line"></span><br><span class="line">docker run -d --name pushpin -p 4430:4430 -p 7999:7999 -p 5560:5560 -p 5561:5561 -p 5562:5562 -p 5563:5563 -v &#x2F;Users&#x2F;shankai&#x2F;Desktop&#x2F;pushpin-config:&#x2F;etc&#x2F;pushpin&#x2F; -v &#x2F;Users&#x2F;shankai&#x2F;Desktop&#x2F;pushpin-certs:&#x2F;usr&#x2F;lib&#x2F;pushpin&#x2F;runner&#x2F;certs fanout&#x2F;pushpin:1.31.0</span><br><span class="line"></span><br><span class="line">docker run -d --name pushpin -p 4430:4430 -p 7999:7999 -p 5560:5560 -p 5561:5561 -p 5562:5562 -p 5563:5563 -v &#x2F;Users&#x2F;shankai&#x2F;archive&#x2F;cbic&#x2F;icos-fdns&#x2F;icosEvent&#x2F;pushpinx&#x2F;pushpin-config:&#x2F;etc&#x2F;pushpin&#x2F; -v &#x2F;Users&#x2F;shankai&#x2F;archive&#x2F;cbic&#x2F;icos-fdns&#x2F;icosEvent&#x2F;pushpinx&#x2F;pushpin-certs:&#x2F;usr&#x2F;lib&#x2F;pushpin&#x2F;runner&#x2F;certs fanout&#x2F;pushpin:1.31.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">docker run -d --name pushpin -p 7999:7999 -p 5560:5560 -p 5561:5561 -p 5562:5562 -p 5563:5563 -v &#x2F;Users&#x2F;shankai&#x2F;Desktop&#x2F;pushpin-config:&#x2F;etc&#x2F;pushpin&#x2F; fanout&#x2F;pushpin:1.32.2</span><br></pre></td></tr></table></figure>
<h3 id="Port"><a href="#Port" class="headerlink" title="Port"></a>Port</h3><ul>
<li>7999</li>
<li>5560</li>
<li>5561</li>
<li>5562</li>
</ul>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><ul>
<li><p>conf: /etc/pushpin/pushpin.conf</p>
</li>
<li><p>routes: /etc/pushpin/routes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* 192.168.130.40:8099</span><br><span class="line">*,proto&#x3D;ws 192.168.130.40:8098,over_http</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h3 id="-1"><a href="#-1" class="headerlink" title=""></a></h3><h4 id="Mock-Backend-test"><a href="#Mock-Backend-test" class="headerlink" title="Mock Backend [test]"></a>Mock Backend [test]</h4><ul>
<li>subscribe</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http:&#x2F;&#x2F;localhost:7999&#x2F;stream</span><br></pre></td></tr></table></figure>
<ul>
<li>publish </li>
</ul>
<p>cli: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pushpin-publish test &quot;hello there&quot;</span><br></pre></td></tr></table></figure>
<p>restful:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -d &#39;&#123; &quot;items&quot;: [ &#123; &quot;channel&quot;: &quot;test&quot;, &quot;formats&quot;: &#123;</span><br><span class="line">    &quot;http-stream&quot;: &#123; &quot;content&quot;: &quot;hello there\n&quot; &#125; &#125; &#125; ] &#125;&#39; \</span><br><span class="line">    http:&#x2F;&#x2F;localhost:5561&#x2F;publish&#x2F;</span><br></pre></td></tr></table></figure>
<p>curl -d ‘{ “items”: [ { “channel”: “test”, “formats”: {<br>    “http-stream”: { “content”: “hello there\n” } } } ] }’ <br>    <a target="_blank" rel="noopener" href="http://localhost:5561/publish/">http://localhost:5561/publish/</a></p>
<h4 id="Backend-myChannel"><a href="#Backend-myChannel" class="headerlink" title="Backend [myChannel]"></a>Backend [myChannel]</h4><ul>
<li>http ( * 192.168.130.40:8099)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> headers = req.headers;</span><br><span class="line">    <span class="keyword">var</span> channel = headers[<span class="string">&#x27;channel&#x27;</span>] || <span class="string">&#x27;myChannel&#x27;</span>;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Grip-Hold&#x27;</span>: <span class="string">&#x27;stream&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Grip-Channel&#x27;</span>: channel</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(headers);</span><br><span class="line">    res.end(<span class="string">&#x27;Stream opened, prepare yourself!\n&#x27;</span>);</span><br><span class="line">&#125;).listen(<span class="number">8099</span>, <span class="string">&#x27;0.0.0.0&#x27;</span>);</span><br></pre></td></tr></table></figure>


<ul>
<li>over_http ( *,proto=ws 192.168.130.40:8098,over_http )</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// npm install --save grip</span></span><br><span class="line"><span class="keyword">var</span> grip = <span class="built_in">require</span>(<span class="string">&#x27;grip&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">        <span class="string">&#x27;Sec-WebSocket-Extensions&#x27;</span>: <span class="string">&#x27;grip&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/websocket-events&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    req.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">        body += chunk;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    req.on(<span class="string">&#x27;end&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> inEvents = grip.decodeWebSocketEvents(body);</span><br><span class="line">        <span class="keyword">var</span> outEvents = [];</span><br><span class="line">        <span class="keyword">if</span> (inEvents[<span class="number">0</span>].getType() == <span class="string">&#x27;OPEN&#x27;</span>) &#123;</span><br><span class="line">            outEvents.push(<span class="keyword">new</span> grip.WebSocketEvent(<span class="string">&#x27;OPEN&#x27;</span>));</span><br><span class="line">            outEvents.push(<span class="keyword">new</span> grip.WebSocketEvent(<span class="string">&#x27;TEXT&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;c:&#x27;</span> + grip.webSocketControlMessage(</span><br><span class="line">                <span class="string">&#x27;subscribe&#x27;</span>,</span><br><span class="line">                &#123;<span class="string">&#x27;channel&#x27;</span>: <span class="string">&#x27;mychannel&#x27;</span>&#125;)));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        res.end(grip.encodeWebSocketEvents(outEvents));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).listen(<span class="number">8098</span>, <span class="string">&#x27;0.0.0.0&#x27;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>zhttp.py</li>
</ul>
<p>Routes: <code>* zhttpreq/tcp://127.0.0.1:10000</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zmq</span><br><span class="line"><span class="keyword">import</span> tnetstring</span><br><span class="line"></span><br><span class="line">zmq_context = zmq.Context()</span><br><span class="line">sock = zmq_context.socket(zmq.REP)</span><br><span class="line">sock.connect(<span class="string">&#x27;tcp://127.0.0.1:10000&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    req = tnetstring.loads(sock.recv()[<span class="number">1</span>:])</span><br><span class="line">    print(req[<span class="string">&#x27;headers&#x27;</span>])</span><br><span class="line"></span><br><span class="line">    resp = &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: req[<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="string">&#x27;reason&#x27;</span>: <span class="string">&#x27;OK&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;headers&#x27;</span>: [</span><br><span class="line">            [<span class="string">&#x27;Grip-Hold&#x27;</span>, <span class="string">&#x27;stream&#x27;</span>],</span><br><span class="line">            [<span class="string">&#x27;Grip-Channel&#x27;</span>, <span class="string">&#x27;test&#x27;</span>],</span><br><span class="line">            [<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>]</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;body&#x27;</span>: <span class="string">&#x27;welcome to the stream\n&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sock.send(<span class="string">&#x27;T&#x27;</span> + tnetstring.dumps(resp))</span><br></pre></td></tr></table></figure>


<h4 id="ZMQ"><a href="#ZMQ" class="headerlink" title="ZMQ"></a>ZMQ</h4><ul>
<li>XPUB.py</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zmq</span><br><span class="line"></span><br><span class="line">zmq_context = zmq.Context.instance()</span><br><span class="line">sock = zmq_context.socket(zmq.XPUB)</span><br><span class="line"></span><br><span class="line"><span class="comment"># unlimited subscriptions</span></span><br><span class="line">sock.rcvhwm = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># resend subscriptions after disconnect</span></span><br><span class="line">sock.immediate = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">sock.connect(<span class="string">&#x27;tcp://localhost:5562&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    m = sock.recv()</span><br><span class="line">    mtype = m[<span class="number">0</span>]</span><br><span class="line">    topic = m[<span class="number">1</span>:]</span><br><span class="line">    <span class="keyword">if</span> mtype == <span class="string">&#x27;\x01&#x27;</span>:</span><br><span class="line">        print(<span class="string">&#x27;SUB %s&#x27;</span> % topic)</span><br><span class="line">    <span class="keyword">elif</span> mtype == <span class="string">&#x27;\x00&#x27;</span>:</span><br><span class="line">        print(<span class="string">&#x27;UNSUB %s&#x27;</span> % topic)</span><br></pre></td></tr></table></figure>



<ul>
<li>stats</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> tnetstring</span><br><span class="line"><span class="keyword">import</span> zmq</span><br><span class="line"></span><br><span class="line">ctx = zmq.Context()</span><br><span class="line">sock = ctx.socket(zmq.SUB)</span><br><span class="line">sock.connect(<span class="string">&#x27;ipc:///var/run/pushpin/pushpin-stats&#x27;</span>)</span><br><span class="line">sock.setsockopt(zmq.SUBSCRIBE, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    m_raw = sock.recv()</span><br><span class="line">    mtype, mdata = m_raw.split(<span class="string">&#x27; &#x27;</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> mdata[<span class="number">0</span>] != <span class="string">&#x27;T&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;unsupported format&#x27;</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    m = tnetstring.loads(mdata[<span class="number">1</span>:])</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;%s %s&#x27;</span> % (mtype, m)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="shankai"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">shankai</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">54</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">118</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/shankai" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;shankai" rel="noopener" target="_blank"><i class="fa fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:shankai.kvn@gmail.com" title="E-Mail → mailto:shankai.kvn@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shankai</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">158k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:24</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'neutral',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

</body>
</html>
